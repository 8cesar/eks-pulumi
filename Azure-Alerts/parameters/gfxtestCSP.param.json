{
  "parameters": {
    "MonitWorkSpace": [
      {
        "resourceGroup": "dev-monitoring-rg",
        "workspaceName": "dev-workspace-gfx",
        "sku": "pergb2018",
        "retentionInDays": 60
      }
    ],
    "LogicApp01": [
      {
        "resourceGroup": "dev-monitoring-rg",
        "logicAppName": "dev-monitoring-gfx",
        "ConnectionName": "team",
        "ConnectionDisplayName": "monitoring@greenflux.com",
        "ConnectiontokenTenantId": "3145cea7-e759-4aeb-b8fc-506e0a02fd91",
        "teams_1_token:TenantId": "3145cea7-e759-4aeb-b8fc-506e0a02fd91"
      }
    ],
    "LogicApp02": [
      {
        "resourceGroup": "dev-monitoring-rg",
        "logicAppName": "dev-servicehealth-gfx",
        "ConnectionName": "team",
        "ConnectionDisplayName": "monitoring@greenflux.com",
        "ConnectiontokenTenantId": "3145cea7-e759-4aeb-b8fc-506e0a02fd91"
      }
    ],
    "ServiceHealth01": [
      {
        "resourceGroup": "dev-monitoring-rg",
        "AlertGroupName": "test-sh01",
        "ServiceHealthName": "dev-azure-HealthStatus"
      }
    ],
    "ActionGroup": [
      {
        "resourceGroup": "dev-monitoring-rg",
        "alertGroupName": "test-monit02",
        "AlertName1": "devops1",
        "email": "arnis.golts@greenflux.com",
        "LogAppReceiver": "dev-monitoring-gfx"
      },
      {
        "resourceGroup": "dev-monitoring-rg",
        "alertGroupName": "test-monit01",
        "AlertName1": "monit01",
        "email": "arnis.golts@greenflux.com",
        "LogAppReceiver": "dev-monitoring-gfx"
      },
      {
        "resourceGroup": "dev-monitoring-rg",
        "alertGroupName": "test-sh01",
        "AlertName1": "service-health",
        "email": "arnis.golts@greenflux.com",
        "LogAppReceiver": "dev-servicehealth-gfx"
      }
    ],
    "Redis": [
      {
        "resourceGroup": "gfx-app-t",
        "alertGroupName": "test-monit01",
        "redisName": "gfx-app-redis-cache-t",
        "alertSeverity": 3,
        "evaluationFrequency": "PT15M",
        "windowSize": "PT1H",
        "metricName": "errors",
        "monitname": "Errors greater than 30",
        "operator": "GreaterThan",
        "threshold": 30,
        "timeAggregation": "Maximum",
        "teamName": "DevOps"
      },
      {
        "resourceGroup": "gfx-app-t",
        "alertGroupName": "test-monit01",
        "redisName": "gfx-app-redis-cache-t",
        "alertSeverity": 3,
        "evaluationFrequency": "PT15M",
        "windowSize": "PT1H",
        "metricName": "errors",
        "monitname": "Errors greater than 60",
        "operator": "GreaterThan",
        "threshold": 60,
        "timeAggregation": "Maximum",
        "teamName": "DevOps"
      }
    ],
    "EventHub": [
      {
        "resourceGroup": "gfx-app-t",
        "alertGroupName": "test-monit01",
        "eventHubName": "gfx-app-eventhub-t",
        "alertSeverity": 3,
        "evaluationFrequency": "PT15M",
        "windowSize": "PT1H",
        "metricName": "ActiveConnections",
        "monitname": "Active connections greater than 10",
        "operator": "GreaterThan",
        "threshold": 10,
        "timeAggregation": "Average",
        "teamName": "DevOps"
      },
      {
        "resourceGroup": "gfx-app-t",
        "alertGroupName": "test-monit01",
        "eventHubName": "gfx-app-eventhub-t",
        "alertSeverity": 3,
        "evaluationFrequency": "PT15M",
        "windowSize": "PT1H",
        "metricName": "ActiveConnections",
        "monitname": "Active connections greater than 20",
        "operator": "GreaterThan",
        "threshold": 20,
        "timeAggregation": "Average",
        "teamName": "DevOps"
      }
    ],
    "CosmoDB": [
      {
        "resourceGroup": "gfx-app-t",
        "alertGroupName": "test-monit01",
        "cosmoDBName": "gfx-app-cosmos-t",
        "alertSeverity": 3,
        "evaluationFrequency": "PT15M",
        "windowSize": "PT1H",
        "metricName": "DataUsage",
        "monitname": "Data usage greater than 65,555,000",
        "operator": "GreaterThan",
        "threshold": 65555000,
        "timeAggregation": "Total",
        "teamName": "DevOps"
      },
      {
        "resourceGroup": "gfx-app-t",
        "alertGroupName": "test-monit01",
        "cosmoDBName": "gfx-app-cosmos-t",
        "alertSeverity": 3,
        "evaluationFrequency": "PT15M",
        "windowSize": "PT1H",
        "metricName": "DocumentCount",
        "monitname": "Document count greater than 28000",
        "operator": "GreaterThan",
        "threshold": 28000,
        "timeAggregation": "Total",
        "teamName": "DevOps"
      }
    ],
    "AppservicePLan1": [
      {
        "resourceGroup": "gfx-app-t",
        "alertGroupName": "test-monit01",
        "serverfarmName": "gfx-app-plan-t",
        "alertSeverity": 2,
        "evaluationFrequency": "PT15M",
        "windowSize": "PT1H",
        "metricName": "CpuPercentage",
        "monitname": "CPU usage greater than 90",
        "operator": "GreaterThan",
        "threshold": 90,
        "timeAggregation": "Average",
        "teamName": "DevOps"
      },
      {
        "resourceGroup": "gfx-app-t",
        "alertGroupName": "test-monit01",
        "serverfarmName": "gfx-app-plan-t",
        "alertSeverity": 2,
        "evaluationFrequency": "PT15M",
        "windowSize": "PT1H",
        "metricName": "MemoryPercentage",
        "monitname": "Memory usage greater than 90",
        "operator": "GreaterThan",
        "threshold": 90,
        "timeAggregation": "Average",
        "teamName": "DevOps"
      }
    ],
    "WebServices": [
      {
        "resourceGroup": "gfx-app-t",
        "alertGroupName": "test-monit02",
        "WebAppName": "gfx-app-api-t",
        "alertSeverity": 2,
        "evaluationFrequency": "PT15M",
        "windowSize": "PT1H",
        "metricName": "Http5xx",
        "monitname": "Http 5xx errors greater than 10",
        "operator": "GreaterThan",
        "threshold": 10,
        "timeAggregation": "Average",
        "teamName": "DevOps"
      },
      {
        "resourceGroup": "gfx-app-t",
        "alertGroupName": "test-monit02",
        "WebAppName": "gfx-app-api-ocpi-emsp-t",
        "alertSeverity": 2,
        "evaluationFrequency": "PT15M",
        "windowSize": "PT1H",
        "metricName": "Http5xx",
        "monitname": "Http 5xx errors greater than 10",
        "operator": "GreaterThan",
        "threshold": 10,
        "timeAggregation": "Average",
        "teamName": "ChargeAssist"
      }
    ],
    "AzureSQLDatabase": [
      {
        "resourceGroup": "gfx-portal-t",
        "alertGroupName": "test-monit02",
        "sqlServerName": "gfx-portal-sql-t",
        "sqlDbName": "gfx-portal-db-portal-shared",
        "alertSeverity": 3,
        "evaluationFrequency": "PT15M",
        "windowSize": "PT1H",
        "metricName": "cpu_percent",
        "monitname": "CPU usage greater than 90",
        "operator": "GreaterThan",
        "threshold": 90,
        "timeAggregation": "Average",
        "teamName": "DevOps"
      },
      {
        "resourceGroup": "gfx-portal-t",
        "alertGroupName": "test-monit02",
        "sqlServerName": "gfx-portal-sql-t",
        "sqlDbName": "gfx-portal-db-tenant",
        "alertSeverity": 2,
        "evaluationFrequency": "PT15M",
        "windowSize": "PT1H",
        "metricName": "cpu_percent",
        "monitname": "CPU usage greater than 90",
        "operator": "GreaterThan",
        "threshold": 90,
        "timeAggregation": "Average",
        "teamName": "DevOps"
      }
    ]
  }
}